<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Rongcui Dong's Site - Using Preact.JS in this blog</title>
        <link rel="stylesheet" href="../css/default.css" />
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous">
        <script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js" integrity="sha384-g7c+Jr9ZivxKLnZTDUhnkOnsh30B4H0rpLUpJ4jAIKs4fnJI+sEnkvrMWph2EDg4" crossorigin="anonymous"></script>
        <script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js" integrity="sha384-mll67QQFJfxn0IYznZYonOWZ644AWYC+Pt2cHqMaRhXVrursRwvLnLaebdGIlYNa" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>
        <style>
            .katex-version {display: none;}
            .katex-version::after {content:"0.10.2 or earlier";}
        </style>
    </head>
    <body>
        <header>
            <div class="logo">
                <a href="../">Rongcui Dong's Site</a>
            </div>
            <nav>
                <a href="../">Home</a>
                <a href="../blog.html">Blog</a>
                <a href="../contact.html">Contact</a>
                <a href="../archive.html">Archive</a>
            </nav>
        </header>

        <main role="main">
            <h1>Using Preact.JS in this blog</h1>
            <article>
    <section class="header">
        Posted on April 17, 2021
        
    </section>
    <section>
        <h2 id="markdown-htm-preact">Markdown + Htm + Preact</h2>
<p>This page utilizes the fact that HTML can be embedded in Markdown. Using a CDN, it takes around 4.7KB to download <a href="https://preactjs.com">Preact</a>, a very small cost. Of course, this means I am not going to have any advanced libraries available.</p>
<p>What can I do with this? Well, probably some interactive pages. I have also considered Vue.js, but it consumes 40 KB (with capability to use templates). For an absolute minimal site like this, Preact is the better choice.</p>
<h2 id="demo">Demo</h2>
<div id="hello-app">
JavaScript did not work
</div>
<div id="form-app">
JavaScript did not work
</div>
<script type="module">
import { h, render, Component } from "https://cdn.jsdelivr.net/npm/preact/dist/preact.mjs"

const root = document.getElementById("app-container")

const Hello = (props) => h("b", {}, `Hello from Preact!`)

const helloRoot = document.getElementById("hello-app");
helloRoot.innerHTML = ''
render(h(Hello), helloRoot)

class HelloForm extends Component {
    state = { value: "Preact", name: "Preact" }
    onInput = (ev) => {
        this.setState({ value: ev.target.value })
    }
    onSubmit = (ev) => {
        ev.preventDefault();
        this.setState({name: this.state.value})
    }
    render() {
        return h("div", {},
            h("form",  {onSubmit: this.onSubmit},
                h("strong", {}, `Hello, [${this.state.name}]!`), 
                h("input", {type: "text", placeholder: this.state.value, onInput: this.onInput}),
                h("button", {type: "submit"}, "Update")
            )
        )
    }
}

const helloFormRoot = document.getElementById("form-app");
helloFormRoot.innerHTML = ''
render(h(HelloForm), helloFormRoot)
</script>
    </section>
</article>

        </main>

        <footer>
            Site generated by
            <a href="http://jaspervdj.be/hakyll">Hakyll</a> | 
            <a href="https://katex.org">KaTeX</a>
            <span class="katex">
            <span class="katex-mathml"> stylesheet is not loaded!</span>
            <span class="katex-version rule"> stylesheet version: </span>
            </span> |
            <a href="https://github.com/rongcuid">GitHub Profile</a>
        </footer>
    </body>
</html>
